# API: Отзывы

Endpoints для управления отзывами на туры.

## Создание отзыва

### `POST /reviews/`

Создание отзыва на тур.

**Требуется авторизация:** ✅

**Тело запроса:**

```json
{
  "tour_id": 1,
  "text": "Отличный тур! Всё было организовано на высшем уровне.",
  "rating": 9
}
```

**Параметры:**

| Поле | Тип | Обязательно | Описание |
|------|-----|-------------|----------|
| tour_id | integer | ✅ | ID тура |
| text | string | ✅ | Текст отзыва |
| rating | integer | ✅ | Оценка от 1 до 10 |

**Успешный ответ (201 Created):**

```json
{
  "id": 1,
  "tour_id": 1,
  "user_id": 1,
  "text": "Отличный тур! Всё было организовано на высшем уровне.",
  "rating": 9,
  "created_at": "2025-01-06T15:30:00"
}
```

---

## Отзывы на тур

### `GET /reviews/tour/{tour_id}`

Получение всех отзывов для конкретного тура.

**Path параметры:**

| Параметр | Тип | Описание |
|----------|-----|----------|
| tour_id | integer | ID тура |

**Query параметры:**

| Параметр | Тип | По умолчанию | Описание |
|----------|-----|--------------|----------|
| limit | integer | 100 | Количество отзывов |
| offset | integer | 0 | Смещение |

**Успешный ответ (200 OK):**

```json
[
  {
    "id": 1,
    "tour_id": 1,
    "user_id": 1,
    "text": "Отличный тур!",
    "rating": 9,
    "created_at": "2025-01-06T15:30:00",
    "username": "john_doe"
  },
  {
    "id": 2,
    "tour_id": 1,
    "user_id": 2,
    "text": "Хороший тур, но дорого",
    "rating": 7,
    "created_at": "2025-01-05T10:00:00",
    "username": "jane_smith"
  }
]
```

---

## Получение отзыва

### `GET /reviews/{id}`

Получение конкретного отзыва по ID.

**Path параметры:**

| Параметр | Тип | Описание |
|----------|-----|----------|
| id | integer | ID отзыва |

**Успешный ответ (200 OK):**

```json
{
  "id": 1,
  "tour_id": 1,
  "user_id": 1,
  "text": "Отличный тур!",
  "rating": 9,
  "created_at": "2025-01-06T15:30:00"
}
```

---

## Обновление отзыва

### `PUT /reviews/{id}`

Обновление своего отзыва.

**Требуется авторизация:** ✅

**Path параметры:**

| Параметр | Тип | Описание |
|----------|-----|----------|
| id | integer | ID отзыва |

**Тело запроса:**

```json
{
  "text": "Обновлённый текст отзыва",
  "rating": 10
}
```

**Успешный ответ (200 OK):**

Возвращает обновлённый отзыв.

**Ошибки:**

- `401 Unauthorized` - требуется авторизация
- `403 Forbidden` - можно редактировать только свои отзывы
- `404 Not Found` - отзыв не найден

---

## Удаление отзыва

### `DELETE /reviews/{id}`

Удаление своего отзыва.

**Требуется авторизация:** ✅

**Успешный ответ (204 No Content):**

Тело ответа пустое.

**Ошибки:**

- `401 Unauthorized` - требуется авторизация
- `403 Forbidden` - можно удалять только свои отзывы
- `404 Not Found` - отзыв не найден

---

## Полный пример

```python
import requests

BASE_URL = "http://localhost:8000"
token = "YOUR_ACCESS_TOKEN"
headers = {"Authorization": f"Bearer {token}"}

# 1. Создание отзыва
review = requests.post(
    f"{BASE_URL}/reviews/",
    headers=headers,
    json={
        "tour_id": 1,
        "text": "Замечательный тур, рекомендую!",
        "rating": 10
    }
).json()
review_id = review["id"]
print(f"Отзыв создан: {review_id}")

# 2. Получение всех отзывов на тур
tour_reviews = requests.get(
    f"{BASE_URL}/reviews/tour/1"
).json()
print(f"Отзывов на тур: {len(tour_reviews)}")

# 3. Обновление отзыва
requests.put(
    f"{BASE_URL}/reviews/{review_id}",
    headers=headers,
    json={
        "text": "Обновлённый отзыв",
        "rating": 9
    }
)
print("Отзыв обновлён")

# 4. Удаление отзыва
requests.delete(
    f"{BASE_URL}/reviews/{review_id}",
    headers=headers
)
print("Отзыв удалён")
```
